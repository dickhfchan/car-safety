webpackJsonp([12],{388:function(e,t,a){a(475);var l=a(32)(a(450),a(499),null,null);e.exports=l.exports},450:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(47),o=a(65);t.default={components:{},data:function(){return{title:this.$t("totalScoreAndAlert"),columns1:[{name:"name",text:this.$t("driverName")},{name:"車牌",visible:!1},{name:"total_score",text:this.$t("totalScore")},{name:"hmw",text:this.$t("hmw")},{name:"pcw",text:this.$t("pcw")},{name:"fcw",text:this.$t("fcw")},{name:"ufcw",text:this.$t("ufcw")},{name:"lldw",text:this.$t("lldw")},{name:"rldw",text:this.$t("rldw")},{name:"aaw",text:this.$t("aaw")},{name:"abw",text:this.$t("abw")}],rows1:[],rows1Ranking:[],loading:!1}},computed:{dateRange:function(){return this.$store.state.dateRangeInD2}},watch:{dateRange:{deep:!0,handler:function(){this.getData()}}},created:function(){(0,o.initColumns)(this,this.columns1),this.getData()},mounted:function(){var e=this;this.$nextTick(function(){document.title=e.title})},methods:{getData:function(){var e=this,t=this.dateRange,a=(0,o.newDate)(t[0]+" 00:00:00").getTime(),n=(0,o.newDate)(t[1]+" 23:59:59").getTime();this.loading=!0,(0,l.retry)(function(){return e.$http.get("dao/avg_warning_drv_name")})().then(function(t){var l=t.data;e.loading=!1,e.rows1=l.JSON.filter(function(e){return a<=e.start_date&&e.start_date<=n}).filter(function(t){return t.company_id===e.$store.state.user.company_id}),e.rows1.forEach(function(e){e.hmw=e.hmw_h+e.hmw_m+e.hmw_l}),e.rows1Ranking=e.rows1.map(function(e){return Object.assign({},e)}),(0,o.initRows)(e,e.rows1,e.columns1),(0,o.initRows)(e,e.rows1Ranking,e.columns1),e.columns1.forEach(function(t,a){if(a>1){var l=e.rows1Ranking.slice(0);l.sort(function(e,a){return e[t.name]-a[t.name]}),l.reverse();var o=-1,n=0;l.forEach(function(e){var a=parseFloat(e[t.name]);a!==o&&n++,e[t.name]=n>20?20:n,o=a})}})}).catch(function(t){throw e.loading=!1,e.$alert("load failed"),t})},onSort:function(e,t,a){(0,o.sortRows)(e,t,a)},exportExcel:function(e,t,a){var l=t,n=e.map(function(e){var t=[];return l.forEach(function(a){var l=e[a.name];t.push(a.formatter?a.formatter(l):l)}),t}),r=l.map(function(e){return e.text});(0,o.generateExcel)(n,a,r)}}}},460:function(e,t,a){t=e.exports=a(383)(!0),t.push([e.i,".md-table-cell.rank1,.md-table tbody .md-table-row:hover .md-table-cell.rank1{background-color:#00ff1e}.md-table-cell.rank2,.md-table tbody .md-table-row:hover .md-table-cell.rank2{background-color:#1aff1e}.md-table-cell.rank3,.md-table tbody .md-table-row:hover .md-table-cell.rank3{background-color:#33ff1e}.md-table-cell.rank4,.md-table tbody .md-table-row:hover .md-table-cell.rank4{background-color:#4dff1e}.md-table-cell.rank5,.md-table tbody .md-table-row:hover .md-table-cell.rank5{background-color:#66ff1e}.md-table-cell.rank6,.md-table tbody .md-table-row:hover .md-table-cell.rank6{background-color:#80ff1e}.md-table-cell.rank7,.md-table tbody .md-table-row:hover .md-table-cell.rank7{background-color:#99ff1e}.md-table-cell.rank8,.md-table tbody .md-table-row:hover .md-table-cell.rank8{background-color:#b3ff1e}.md-table-cell.rank9,.md-table tbody .md-table-row:hover .md-table-cell.rank9{background-color:#ccff1e}.md-table-cell.rank10,.md-table tbody .md-table-row:hover .md-table-cell.rank10{background-color:#e6ff1e}.md-table-cell.rank11,.md-table tbody .md-table-row:hover .md-table-cell.rank11{background-color:#ffe61e}.md-table-cell.rank12,.md-table tbody .md-table-row:hover .md-table-cell.rank12{background-color:#ffcc1e}.md-table-cell.rank13,.md-table tbody .md-table-row:hover .md-table-cell.rank13{background-color:#ffb31e}.md-table-cell.rank14,.md-table tbody .md-table-row:hover .md-table-cell.rank14{background-color:#ff991e}.md-table-cell.rank15,.md-table tbody .md-table-row:hover .md-table-cell.rank15{background-color:#ff801e}.md-table-cell.rank16,.md-table tbody .md-table-row:hover .md-table-cell.rank16{background-color:#ff661e}.md-table-cell.rank17,.md-table tbody .md-table-row:hover .md-table-cell.rank17{background-color:#ff4d1e}.md-table-cell.rank18,.md-table tbody .md-table-row:hover .md-table-cell.rank18{background-color:#ff331e}.md-table-cell.rank19,.md-table tbody .md-table-row:hover .md-table-cell.rank19{background-color:#ff1a1e}.md-table-cell.rank20,.md-table tbody .md-table-row:hover .md-table-cell.rank20{background-color:#ff001e}","",{version:3,sources:["/home/he/www/works/car-tracking/src/views/D2.vue"],names:[],mappings:"AACA,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,8EACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B,AACD,gFACE,wBAA0B,CAC3B",file:"D2.vue",sourcesContent:["\n.md-table-cell.rank1, .md-table tbody .md-table-row:hover .md-table-cell.rank1 {\n  background-color: #00ff1e;\n}\n.md-table-cell.rank2, .md-table tbody .md-table-row:hover .md-table-cell.rank2 {\n  background-color: #1aff1e;\n}\n.md-table-cell.rank3, .md-table tbody .md-table-row:hover .md-table-cell.rank3 {\n  background-color: #33ff1e;\n}\n.md-table-cell.rank4, .md-table tbody .md-table-row:hover .md-table-cell.rank4 {\n  background-color: #4dff1e;\n}\n.md-table-cell.rank5, .md-table tbody .md-table-row:hover .md-table-cell.rank5 {\n  background-color: #66ff1e;\n}\n.md-table-cell.rank6, .md-table tbody .md-table-row:hover .md-table-cell.rank6 {\n  background-color: #80ff1e;\n}\n.md-table-cell.rank7, .md-table tbody .md-table-row:hover .md-table-cell.rank7 {\n  background-color: #99ff1e;\n}\n.md-table-cell.rank8, .md-table tbody .md-table-row:hover .md-table-cell.rank8 {\n  background-color: #b3ff1e;\n}\n.md-table-cell.rank9, .md-table tbody .md-table-row:hover .md-table-cell.rank9 {\n  background-color: #ccff1e;\n}\n.md-table-cell.rank10, .md-table tbody .md-table-row:hover .md-table-cell.rank10 {\n  background-color: #e6ff1e;\n}\n.md-table-cell.rank11, .md-table tbody .md-table-row:hover .md-table-cell.rank11 {\n  background-color: #ffe61e;\n}\n.md-table-cell.rank12, .md-table tbody .md-table-row:hover .md-table-cell.rank12 {\n  background-color: #ffcc1e;\n}\n.md-table-cell.rank13, .md-table tbody .md-table-row:hover .md-table-cell.rank13 {\n  background-color: #ffb31e;\n}\n.md-table-cell.rank14, .md-table tbody .md-table-row:hover .md-table-cell.rank14 {\n  background-color: #ff991e;\n}\n.md-table-cell.rank15, .md-table tbody .md-table-row:hover .md-table-cell.rank15 {\n  background-color: #ff801e;\n}\n.md-table-cell.rank16, .md-table tbody .md-table-row:hover .md-table-cell.rank16 {\n  background-color: #ff661e;\n}\n.md-table-cell.rank17, .md-table tbody .md-table-row:hover .md-table-cell.rank17 {\n  background-color: #ff4d1e;\n}\n.md-table-cell.rank18, .md-table tbody .md-table-row:hover .md-table-cell.rank18 {\n  background-color: #ff331e;\n}\n.md-table-cell.rank19, .md-table tbody .md-table-row:hover .md-table-cell.rank19 {\n  background-color: #ff1a1e;\n}\n.md-table-cell.rank20, .md-table tbody .md-table-row:hover .md-table-cell.rank20 {\n  background-color: #ff001e;\n}\n"],sourceRoot:""}])},475:function(e,t,a){var l=a(460);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(384)("f538b102",l,!0)},499:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("md-card",{staticClass:"m-a card-1"},[a("md-card-content",[a("h2",{staticClass:"md-title"},[e._v(e._s(e.$t("totalScoreAndAlertCountPer100KM")))]),e._v(" "),a("div",{staticClass:"relative overflow-hidden-y"},[a("md-table",{on:{select:function(e){},sort:function(t){e.onSort(t,e.rows1,e.columns1)}}},[a("md-table-header",[a("md-table-row",e._l(e.columns1,function(t){return t.visible?a("md-table-head",{key:t.name,attrs:{"md-sort-by":t.name}},[e._v(e._s(t.text))]):e._e()}))],1),e._v(" "),a("md-table-body",e._l(e.rows1,function(t){return t.visible?a("md-table-row",{key:t.vrm_grp_id,attrs:{"md-item":t}},e._l(e.columns1,function(l){return l.visible?a("md-table-cell",{key:l.name},[e._v("\n               "+e._s(t[l.name])+"\n             ")]):e._e()})):e._e()}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"absolute-backdrop center-wrapper"},[a("md-spinner",{attrs:{"md-indeterminate":""}})],1)],1),e._v(" "),a("div",{staticClass:"card-buttons"},[a("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.exportExcel(e.rows1,e.columns1,e.$t("totalScoreAndAlertCountPer100KM"))}}},[a("md-icon",[e._v("get_app")]),e._v(" "),a("md-tooltip",{attrs:{"md-direction":"bottom"}},[e._v(e._s(e.$t("export")))])],1),e._v(" "),a("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.getData()}}},[a("md-icon",[e._v("refresh")]),e._v(" "),a("md-tooltip",{attrs:{"md-direction":"bottom"}},[e._v(e._s(e.$t("refresh")))])],1),e._v(" "),a("fullscreen-button")],1)])],1),e._v(" "),a("md-card",{staticClass:"m-x m-b card-1"},[a("md-card-content",[a("h2",{staticClass:"md-title"},[e._v(e._s(e.$t("ranking")))]),e._v(" "),a("div",{staticClass:"relative overflow-hidden-y"},[a("md-table",{on:{select:function(e){},sort:function(t){e.onSort(t,e.rows1Ranking,e.columns1)}}},[a("md-table-header",[a("md-table-row",e._l(e.columns1,function(t){return t.visible?a("md-table-head",{key:t.name,attrs:{"md-sort-by":t.name}},[e._v(e._s(t.text))]):e._e()}))],1),e._v(" "),a("md-table-body",e._l(e.rows1Ranking,function(t){return t.visible?a("md-table-row",{key:t.vrm_grp_id,attrs:{"md-item":t}},e._l(e.columns1,function(l,o){return l.visible?a("md-table-cell",{key:l.name,class:o>1&&"rank"+t[l.name]},[e._v("\n               "+e._s(t[l.name])+"\n             ")]):e._e()})):e._e()}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"absolute-backdrop center-wrapper"},[a("md-spinner",{attrs:{"md-indeterminate":""}})],1)],1),e._v(" "),a("div",{staticClass:"card-buttons"},[a("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.exportExcel(e.rows1Ranking,e.columns1,"排名圖")}}},[a("md-icon",[e._v("get_app")]),e._v(" "),a("md-tooltip",{attrs:{"md-direction":"bottom"}},[e._v(e._s(e.$t("export")))])],1),e._v(" "),a("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.getData()}}},[a("md-icon",[e._v("refresh")]),e._v(" "),a("md-tooltip",{attrs:{"md-direction":"bottom"}},[e._v(e._s(e.$t("refresh")))])],1),e._v(" "),a("fullscreen-button")],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.49d0d1414533fc2af37c.js.map